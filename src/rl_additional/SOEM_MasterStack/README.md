<!--
 * @Description: 主站使用说明
 * @Version: 2.0
 * @Author: Kx Zhang
 * @Date: 2022-11-12 23:34:16
 * @LastEditTime: 2022-11-13 17:33:34
-->
## SOEM主站

开发环境： Ubuntu

使用前要确保从站是可以正常驱动电机的。

首先通过ifconfig指令获取自己电脑上的网卡名称，然后把网卡名字粘贴到app/main.c相应位置。

编译后在build/app下会有一个*master_stack_test*可执行文件，运行后开始循环发送/接收指令

**由于要配置网卡，执行可执行文件时需要用sudo指令**

主要的应用程序在app文件夹下面,各文件作用说明如下：

* main.c 程序入口
* config.h 定义EtherCAT传输的数据结构
* transmit.c/.h 定义EtherCAT主站初始化、运行、获取数据、发送数据函数
* motor_control.c/.h 定义电机控制相关指令，配合电机说明手册使用
* math_ops.c/.h 电机控制中用到的一些数学运算

电机默认分配Id范围为1-6，其中1-3号电机挂载在can1上，4-6号电机挂载在can2上，也就是说把id为4的电机接在从站的can1上并不能运行。

设置电机Id、控制模式等一系列不指定单独某个电机的行为默认由can1来执行（也就是说把Id为4的电机设置成Id为1需要从can2拔下来接在can1上）。

ethercat 从站默认分配六个通道，CAN1通道为1，2，3；CAN2通道为 4，5，6；
更改ID，等设置指令均使用CAN1，即1，2，3通道
设置速度、力矩等指令可在函数中自主选择，通道设置为函数中第二个变量“passage”。